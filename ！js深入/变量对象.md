# JS变量对象

>变量对象**是**与执行上下文相关的数据作用域，**用于**存储执行上下文中的变量和函数声明

## 一，全局上下文

**变量对象就是全局对象**，在浏览器中，就是window对象

^可以用this和self访问到全局变量，也就是它本身

~~~js
console.log(this)
console.log(self)
//打印出来都是window，window是全局对象，也是全局上下文的变量对象
~~~

全局对象初始创建的时候，会把Math、parseInt、Date、String作为自己的的作为自己的方法，还会把全局变量当作自己的属性

[^方法]: 方法和属性不是一个东西，但都存在于对象之下。

~~~js
global={
    Math:<>
    String:<>
    window:global//引用自身，浏览器中，window就是全局属性
}
~~~

## 二，函数上下文

变量对象存储变量和函数声明。但是在函数上下文中。多了arguments(函数参数列表)，这是一个类数组对象。

~~~js
VO={
    arguments：Arguments，
    variables:undefine,
    functionName:<函数引用>
}
~~~

函数未进入执行阶段之前，变量对象中的属性都不能访问！进入执行阶段之后，变量对象转换为了活动对象（注意，VO转换为AO（活动对象），但是本质上是一个对象，只是执行阶段不同）。

我们将活动对象作为变量对象，活动对象最开始只包含一个变量（arguments对象），这个对象在全局环境中是没有的

arguments的属性值Arguments包含如下属性：

- callee  //指向调用的函数本身
- length  //真正传递的参数个数
- properties-indexs （字符串类型的整数）//属性的值就是参数的参数值（按参数列表从左到右排列）

## 三，创建过程

### 1，创建阶段

全局对象初始化的时候，就将变量对象引用了自身。



函数在创建阶段就创建了变量对象 其中，变量对象包括：

1. 当前函数的参数列表，建立arguments对象
2. 所有的函数声明（不包括函数表达式），直接指向函数
3. 所有的变量声明，默认为undefined



进入函数上下文时，变量函数都会提升，这就是声明提升，但是没有赋值，仍是undefiend，而函数声明的变量已经可以指向函数。变量声明的优先级最低

（这边的例子我觉得很好）

![76387774474](C:\Users\30580\AppData\Local\Temp\1763877744741.png)

进入函数foo时，执行上下文的变量对象内部是：

~~~Js
VO={
    arguments：{
    0：10，
    1：undefined，
    length：1
}，
c=undefined，
e=undefined，
d=<reference to function declaration d>//指向函数在内存中的地址的引用
// 至于 (function x() {})只是一个函数表达式非函数声明，所以无事
}
~~~

### 2，执行阶段

变量对象便乘活动对象，函数会顺序执行代码，改变变量的值

最后变成：

~~~js
VO={
    arguments：{
    0：10，
    1：undefined，
    length：1
}，
c=10，
e=<reference to Function expression to _e>,
    //毕竟也是个函数，也给你引用上
d=<reference to function declaration d>
}
~~~

小练习：

1，

![76387832613](C:\Users\30580\AppData\Local\Temp\1763878326135.png)

2，

![76387834971](C:\Users\30580\AppData\Local\Temp\1763878349710.png)

## 总结

执行上下文包括三个属性：变量对象，调用链，this

变量对象在不同的上下文之间有区别

>在全局上下文中，变量对象就是本身

>函数上下文中，变量对象包括：arguments，函数声明，变量声明。创建阶段，变量对象有默认值，在执行阶段，变量对象转变为活动对象对象，然后这个对象的值被顺序改变。



